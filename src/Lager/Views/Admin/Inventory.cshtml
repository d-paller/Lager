@{
    ViewData["Title"] = "Inventory";
}

@model Lager.Models.ViewModels.InventoryViewModel

<div class="row inventory-header">
    
    <h1>
        Current Inventory
        <a href="Create" class="btn btn-primary pull-right"><span class="glyphicon glyphicon-plus-sign"></span> Add New</a>
    </h1>
   
</div>


<div class="row">
    <div class="col-sm-2">

        <div class="list-group">
            <a href="#" class="list-group-item active text-center disabled">Categories</a> 
            @foreach (var part in Model.Parts.Select(x => x.Category).Distinct())
            {
                <a href="#" class="list-group-item text-center" data-sortby="Category">
                    @part
                                               <span class="glyphicon @(Model.PagingInfo.SortField == "Category" ?
                                        (Model.PagingInfo.SortDesc? "glyphicon-arrow-down" : "glyphicon-arrow-up") : "glyphicon-sort")"></span>
                </a>
            }
    
        </div>

      </div>

<div class="col-sm-10">
<div class="table-responsive">
    @using (Html.BeginForm("Inventory", "Admin", FormMethod.Post, new { @id = "inventory-table" }))
    {
        @Html.HiddenFor(x => x.PagingInfo.CurrentPageIndex)
        @Html.HiddenFor(x => x.PagingInfo.PageCount)
        @Html.HiddenFor(x => x.PagingInfo.PageSize)
        @Html.HiddenFor(x => x.PagingInfo.SortDesc)
        @Html.HiddenFor(x => x.PagingInfo.SortField)

        <div id="inventory-table">
            <table class="table table-striped table-bordered">
                <tr>
                    <th>Edit|Delete</th>

                    <th class="table-header" data-sortby="Category">
                        Category
                        <span class="glyphicon @(Model.PagingInfo.SortField == "Category" ?
                                        (Model.PagingInfo.SortDesc? "glyphicon-arrow-down" : "glyphicon-arrow-up") : "glyphicon-sort")"></span>
                    </th>

                    <th class="table-header @(Model.PagingInfo.SortField == "Name"? "" : "inactive-header")" data-sortby="Name">
                        Name
                        <span class="glyphicon @(Model.PagingInfo.SortField == "Name" ?
            (Model.PagingInfo.SortDesc? "glyphicon-arrow-down" : "glyphicon-arrow-up") : "glyphicon-sort")"></span>
                    </th>

                    <th class="table-header @(Model.PagingInfo.SortField == "PartId"? "" : "inactive-header")" data-sortby="PartId">
                        Part Id
                        <span class="glyphicon @(Model.PagingInfo.SortField == "PartId" ?
            (Model.PagingInfo.SortDesc? "glyphicon-arrow-down" : "glyphicon-arrow-up") : "glyphicon-sort")"></span>
                    </th>

                    <th class="table-header @(Model.PagingInfo.SortField == "DateAdded"? "" : "inactive-header")" data-sortby="DateAdded">
                        Date Added
                        <span class="glyphicon @(Model.PagingInfo.SortField == "DateAdded" ?
            (Model.PagingInfo.SortDesc? "glyphicon-arrow-down" : "glyphicon-arrow-up") : "glyphicon-sort")"></span>
                    </th>

                    <th class="table-header @(Model.PagingInfo.SortField == "Cost"? "" : "inactive-header")" data-sortby="Cost">
                        Cost
                        <span class="glyphicon @(Model.PagingInfo.SortField == "Cost" ?
            (Model.PagingInfo.SortDesc? "glyphicon-arrow-down" : "glyphicon-arrow-up") : "glyphicon-sort")"></span>
                    </th>

                    <th class="table-header @(Model.PagingInfo.SortField == "DatePurchased"? "" : "inactive-header")" data-sortby="DatePurchased">
                        Date Purchased
                        <span class="glyphicon @(Model.PagingInfo.SortField == "DatePurchased" ?
            (Model.PagingInfo.SortDesc? "glyphicon-arrow-down" : "glyphicon-arrow-up") : "glyphicon-sort")"></span>

<th class="table-header @(Model.PagingInfo.SortField == "Holder"? "" : "inactive-header")" data-sortby="Holder">
                        Current Holder
                        <span class="glyphicon @(Model.PagingInfo.SortField == "Holder" ?
            (Model.PagingInfo.SortDesc? "glyphicon-arrow-down" : "glyphicon-arrow-up") : "glyphicon-sort")"></span>
                    </th>

                    <th class="table-header @(Model.PagingInfo.SortField == "DateCheckedOut"? "" : "inactive-header")" data-sortby="DateCheckedOut">
                        Date Checked Out
                        <span class="glyphicon @(Model.PagingInfo.SortField == "DateCheckedOut" ?
            (Model.PagingInfo.SortDesc? "glyphicon-arrow-down" : "glyphicon-arrow-up") : "glyphicon-sort")"></span>

<th class="table-header @(Model.PagingInfo.SortField == "Vendor"? "" : "inactive-header")" data-sortby="Vendor">
                        Vendor
                        <span class="glyphicon @(Model.PagingInfo.SortField == "Vendor" ?
            (Model.PagingInfo.SortDesc? "glyphicon-arrow-down" : "glyphicon-arrow-up") : "glyphicon-sort")"></span>
                    </th>

                    <th class="table-header @(Model.PagingInfo.SortField == "VendorID"? "" : "inactive-header")" data-sortby="VendorID">
                        Vendor ID
                        <span class="glyphicon @(Model.PagingInfo.SortField == "VendorID" ?
            (Model.PagingInfo.SortDesc? "glyphicon-arrow-down" : "glyphicon-arrow-up") : "glyphicon-sort")"></span>
                    </th>

                    <th>Description</th>

                    <th class="table-header @(Model.PagingInfo.SortField == "PurchaseUrl"? "" : "inactive-header")" data-sortby="PurchaseUrl">
                        Purchase URL
                        <span class="glyphicon @(Model.PagingInfo.SortField == "Category" ?
            (Model.PagingInfo.SortDesc? "glyphicon-arrow-down" : "glyphicon-arrow-up") : "glyphicon-sort")"></span>
                    </th>
                </tr>

                @foreach (var part in Model.Parts)
                {
                    <tr>
                        <td>                        
                                <div class="btn-group">
                                    <button type="button" class="btn-xs btn-success"><a href="Edit"><span class="glyphicon glyphicon-edit"></span></a> </button>
                                    <button type="button" class="btn-xs btn-danger"><span class="glyphicon glyphicon-remove"></span> </button>
                                </div>                         
                        </td>

                        <td>
                            @part.Category
                        </td>

                        <td>
                            @part.Name
                        </td>

                        <td>
                            @part.PartId
                        </td>

                        <td>
                            @part.DateAdded
                        </td>

                        <td>
                            @part.Cost
                        </td>

                        <td>
                            @part.DatePurchased
                        </td>

                        <td>
                            @part.Holder
                        </td>

                        <td>
                            @part.DateCheckedOut
                        </td>

                        <td>
                            @part.Vendor
                        </td>

                        <td>
                            @part.VendorID
                        </td>

                        <td>
                            @part.Description
                        </td>

                        <td>
                            @part.PurchaseUrl
                        </td>

                    </tr>

                }

            </table>
        </div>

            <div id="inventory-nav-btns" class="text-center">
                <ul class="pagination pagination-sm">
                    <li class="page-nav-btn @(Model.PagingInfo.CurrentPageIndex == 0? "disabled":"")"
                        data-page-nav="first"><span class="glyphicon glyphicon glyphicon-step-backward"></span></li>

                    <li class="page-nav-btn @(Model.PagingInfo.CurrentPageIndex == 0? "disabled":"")"
                        data-page-nav="previous"><span class="glyphicon glyphicon glyphicon-menu-left"></span></li>
                </ul>

                <ul class="pagination pagination-sm">

                    @for (int i = 0; i < Model.PagingInfo.PageCount; i++)
                    {
                        <li class="@(i==Model.PagingInfo.CurrentPageIndex?"active":"page-nav-btn")"
                            data-page-nav="@i"><span>@(i + 1)</span></li>
                    }
                </ul>

                <ul class="pagination pagination-sm">
                    <li class="page-nav-btn @(Model.PagingInfo.CurrentPageIndex == Model.PagingInfo.PageCount -1? "disabled":"")"
                        data-page-nav="next"><span class="glyphicon glyphicon glyphicon-menu-right"></span></li>

                    <li class="page-nav-btn @(Model.PagingInfo.CurrentPageIndex == Model.PagingInfo.PageCount -1? "disabled":"")"
                        data-page-nav="last"><span class="glyphicon glyphicon glyphicon-step-forward"></span></li>
                </ul>
            </div>

    }

</div>
</div>
 </div>


